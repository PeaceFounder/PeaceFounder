<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Audit · PeaceFounder.jl</title><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../"><img src="../assets/logo.png" alt="PeaceFounder.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../">PeaceFounder.jl</a></span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">PeaceFounder.jl</a></li><li><a class="tocitem" href="../overview/">Overview</a></li><li><a class="tocitem" href="../setup/">Setup</a></li><li><a class="tocitem" href="../client/">Client</a></li><li class="is-active"><a class="tocitem" href>Audit</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../schema/">REST</a></li><li><a class="tocitem" href="../model_api/">PeaceFounder.Model</a></li><li><a class="tocitem" href="../audittools/">PeaceFounder.AuditTools</a></li><li><a class="tocitem" href="../schedulers/">PeaceFounder.Schedulers</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Audit</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Audit</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/PeaceFounder/PeaceFounder.jl/blob/master/docs/src/audit.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Audit"><a class="docs-heading-anchor" href="#Audit">Audit</a><a id="Audit-1"></a><a class="docs-heading-anchor-permalink" href="#Audit" title="Permalink"></a></h1><p><strong>Note: The demonstrated audit API is in progress. Currently, the best auditing strategy is to recreate the braidchain and ballotbox ledger from one record at a time.</strong></p><p>After elections have ended, the collector publishes a tally. Every voter, after elections, receives a final tally together with consistency proof, which proves that their vote is included in the ledger that has produced the tally. From the voter client, the voter reads four important parameters for the ballotbox:</p><ul><li><code>deme_uuid</code>: a UUID of the deme where the proposal is registered;</li><li><code>proposal_index</code>: an index at which the proposal is recorded in the braidchain ledger;</li><li><code>ledger_length</code>: a number of collected votes in the ledger;</li><li><code>ledger_root</code>: a ballotbox ledger root checksum.</li></ul><p>The auditor also knows a <code>hasher</code> deme used to make checksums, which is immutable when the deme is created.</p><p>To assert the integrity of the vote, an audit takes place. Let&#39;s consider abstract functions to retrieve ballotbox and braidchain ledger archives from the internet with <code>get_ballotbox_archive</code> and `get<em>braidchain</em>archive; then the auditing can be done with the following script:</p><pre><code class="language-julia hljs">braidchain_archive = get_ballotbox_archive(uuid)
ballotbox_archive = get_ballotbox_archive(uuid, proposal_index)[1:ledger_length]

@test checksum(ballotbox_archive, hasher) == ledger_root
@test isbinding(braidchain_archive, ballotbox_archive, hasher)

spec = crypto(braidchain_archive)

@test audit(ballotbox_archive, spec)
@test audit(braidchain_archive)

@show tally(ballotbox_archive)</code></pre><p>Note that <code>spec</code> is read from the <code>DemeSpec</code> record in the braidchain, which can be trusted as the tree braidchain ledger checksum is listed within a proposal&#39;s anchor. The proposal is the first record in the history tree for the ballotbox; thus, it is bound to the <code>ledger_root</code> checksum, so the demespec record is also tied to <code>ledger_root</code>.</p><p>For convenience, an <code>audit</code> method is provided that audits both archives at the same time:</p><pre><code class="language-julia hljs">braidchain_archive = get_ballotbox_archive(uuid)
ballotbox_archive = get_ballotbox_archive(uuid, proposal_index)[1:ledger_length]

@test checksum(ballotbox_archive, hasher) == ledger_root
@test audit(braidchain_archive, ballotbox_archive, hasher)

@show tally(ballotbox_archive)</code></pre><p>Note that this audit does not check the honesty of the <code>registrar</code> and that it has not admitted fake users to gain more influence in the election result. Properties being verified by the audit:</p><ul><li>Legitimacy: only eligible voters cast their votes;</li><li>Equality: every eligible voter can vote at most once;</li><li>Immutability: no vote can be deleted or modified after being recorded in the ledger; </li><li>Tallied as Cast: all cast votes are counted honestly according to predetermined procedure; </li></ul><p>All these properties together ensure software independence so that the resulting tally does not depend on trust in the honest execution of either peacefounder service or braiders. In other words, the previously listed properties would not be altered if the adversary had full control over the peacefounder service and the braiders. </p><p>The immutability is ensured by voter&#39;s clients updating their consistency proof chain, which includes their vote. If the vote gets removed from a chain, every voter who cast their vote will get proof for an inconsistent ledger state called blame. The voter can make the blame public without revealing their vote, thus ensuring immutability and persistence after votes are published. The auditable part here is the votes signed with a pseudonym, which contract voters&#39; clients to follow up at later periods with consistency proofs. On top of that, other monitors can synchronise the ballotbox ledger and add assurances that way.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../client/">« Client</a><a class="docs-footer-nextpage" href="../schema/">REST »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Wednesday 6 September 2023 19:58">Wednesday 6 September 2023</span>. Using Julia version 1.9.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
